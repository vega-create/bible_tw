---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { siteConfig } from '../../site.config';

// å–å¾—æœ€æ–°æ–‡ç« 
const allPosts = await getCollection('posts');
const latestPosts = allPosts
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 6);

// å–å¾—ç²¾é¸æ–‡ç« 
const featuredPosts = allPosts
  .filter(post => post.data.featured && !post.data.draft)
  .slice(0, 3);
---

<BaseLayout>
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 py-16 md:py-24">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">
        {siteConfig.name}
      </h1>
      <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
        {siteConfig.description}
      </p>
      
      <!-- ä»Šæ—¥ç¶“æ–‡æŒ‰éˆ• -->
      <a
        href="/tools/daily-verse"
        class="inline-flex items-center gap-2 btn btn-primary text-lg px-8 py-4 shadow-lg hover:shadow-xl transition-all"
      >
        âœ¨ ä»Šå¤©ç¥è¦å°æˆ‘èªªä»€éº¼ï¼Ÿ
      </a>
    </div>
  </section>
  
  <!-- åˆ†é¡å°èˆª -->
  <section class="py-12 bg-white">
    <div class="max-w-6xl mx-auto px-4">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {siteConfig.categories.map((cat) => (
          <a
            href={`/category/${cat.slug}`}
            class="card p-6 text-center hover:scale-105 transition-transform"
          >
            <span class="text-4xl mb-2 block">{cat.icon}</span>
            <h3 class="font-bold text-gray-800">{cat.name}</h3>
            <p class="text-sm text-gray-500 mt-1">{cat.description}</p>
          </a>
        ))}
      </div>
    </div>
  </section>
  
  <!-- æœ€æ–°æ–‡ç«  -->
  <section class="py-12">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex justify-between items-center mb-8">
        <h2 class="text-2xl font-bold text-gray-800">ğŸ“ æœ€æ–°æ–‡ç« </h2>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {latestPosts.map((post) => {
          const categoryInfo = siteConfig.categories.find(c => c.slug === post.data.category);
          return (
            <a href={`/posts/${post.slug}`} class="card overflow-hidden hover:scale-[1.02] transition-transform">
              {post.data.image && (
                <img
                  src={post.data.image}
                  alt={post.data.title}
                  class="w-full h-40 object-cover"
                  loading="lazy"
                />
              )}
              <div class="p-5">
                {categoryInfo && (
                  <span class="text-xs bg-primary/10 text-primary px-2 py-1 rounded-full">
                    {categoryInfo.icon} {categoryInfo.name}
                  </span>
                )}
                <h3 class="font-bold text-gray-800 mt-2 mb-2 line-clamp-2">
                  {post.data.title}
                </h3>
                <p class="text-gray-500 text-sm line-clamp-2">
                  {post.data.description}
                </p>
              </div>
            </a>
          );
        })}
      </div>
    </div>
  </section>
  
  <!-- å·¥å…·å€å¡Š -->
  <section class="py-12 bg-gradient-to-r from-primary/5 to-accent/5">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <h2 class="text-2xl font-bold mb-4 text-gray-800">ğŸ› ï¸ å¯¦ç”¨å·¥å…·</h2>
      <p class="text-gray-600 mb-8">å¹«åŠ©ä½ æ›´è¦ªè¿‘ç¥çš„å°å·¥å…·</p>
      <div class="grid md:grid-cols-3 gap-6">
        <a href="/tools/daily-verse" class="card p-6 hover:scale-105 transition-transform">
          <span class="text-4xl mb-3 block">ğŸ¯</span>
          <h3 class="font-bold text-gray-800">ä»Šæ—¥ç¶“æ–‡</h3>
          <p class="text-sm text-gray-500 mt-2">æ¯æ—¥ä¸€ç¯€ç¶“æ–‡èˆ‡å•Ÿç¤º</p>
        </a>
        <a href="/tools/prayer-generator" class="card p-6 hover:scale-105 transition-transform">
          <span class="text-4xl mb-3 block">ğŸ™</span>
          <h3 class="font-bold text-gray-800">ç¦±å‘Šç”¢ç”Ÿå™¨</h3>
          <p class="text-sm text-gray-500 mt-2">æ ¹æ“šä¸»é¡Œç”¢ç”Ÿç¦±å‘Šè©</p>
        </a>
        <a href="/tools/bible-quiz" class="card p-6 hover:scale-105 transition-transform">
          <span class="text-4xl mb-3 block">â“</span>
          <h3 class="font-bold text-gray-800">è–ç¶“å•ç­”</h3>
          <p class="text-sm text-gray-500 mt-2">æ¸¬è©¦ä½ çš„è–ç¶“çŸ¥è­˜</p>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
